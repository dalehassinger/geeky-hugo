











































































[{"categories":["vExpert"],"contents":"vExpert 2020 - 2022   I am very proud to be part of the VMware vExpert program. This is the third year that I was accepted into the program. One part of the vExpert program that I think is great is that the program recognizes people for sharing their knowledge and \u0026ldquo;Giving Back\u0026rdquo;. A person selected into the vExpert programs is someone that likes to share, wants to make themselves and everyone around them smarter.\nI think that 2021 was one of my most productive years and one that I advanced my own personal knowledge the most.\nHighlights of 2021 to get accepted into the vExpert Program:  VMworld 2021 session (Presentation): Manage Windows Workloads Through vRealize Automation SaltStack Config [MCL1895] SaltConf21 session (Presentation): Managing Windows with SaltStack Config (6) of my personal Blogs were shared by the VMware “vExpert Cloud Management Community” on the Vmware Blog Web Site. I did several vRealize Automation Presentations at VMware HVC (Healthcare Virtualization Community) Events. PowerBlock Customer Showcase - VM “Right Sizing” I did a IDC interview for VMware on Automation that will be released in 2022. I did a VMware Customer Profile Interview that will be released in 2022. I shared a vRealize Operations “Right Sizing” Dashboard on the code.vmware.com web site.   What is the VMware vExpert Program? Program Overview The VMware vExpert program is VMware\u0026rsquo;s global evangelism and advocacy program. The program is designed to put VMware\u0026rsquo;s marketing resources towards your advocacy efforts. Promotion of your articles, exposure at our global events, co-op advertising, traffic analysis, and early access to beta programs and VMware\u0026rsquo;s roadmap. The awards are for individuals, not companies, and last for one year. Employees of both customers and partners can receive the awards. In the application, we consider various community activities from the previous year as well as the current year\u0026rsquo;s (only for 2nd half applications) activities in determining who gets awards. We look to see that not only were you active but are still active in the path you chose to apply for.\nCriteria If you are interested in becoming a vExpert the criteria is simple. We are looking for IT Professionals who are sharing their VMware knowledge and contributing that back to the community. The term \u0026ldquo;giving back\u0026rdquo; is defined as going above and beyond your day job. There are several ways to share your knowledge and engage with the community. Some of those activities are blogging, book authoring, magazine articles, CloudCred task writing, active in Facebook groups, forum (VMTN as well as other non VMware) platforms, public speaking, VMUG leadership, videos and so on.\n Thanks: I have worked with a great group of people at VMware, past and present. I would like to thank the following people for all their support in no particular order: Steve Leiberson, Karl Hauck, Cosmin Trif, Brock Peterson, Kevin Holland, Daniel Thomas, Marcus Roberts, Paul Schlosser.\nSpecial Thanks to David Kruse for getting me started with vRA.\nSpecial Thanks to some past co-workers, SEs, TAMs, HVC Members that I learned a lot from: Kirk Shaffer, Robert Mitchell, Dan Grove, Steve Holmes, Steve Pittenger, Anton Wesztergom (Opened my eyes to vRA Day 2).\nList of Bloggers that I follow and have learned a lot by them \u0026ldquo;Giving Back\u0026rdquo;: Cody De Arkland, Luc Dekens, Kyle Ruddy, William Lam, Nathen Bennett, Vince Wood, Alan Renouf.\nSpecial Thanks to the person that gave me my first Job in IT: David Cornelius\nand anyone else that helped me in my journey called my career\u0026hellip;\n I have learned a lot from the vCommunity. I want to use this blog as a way for me to \u0026ldquo;give back\u0026rdquo;. If one person finds anything I post helpful I will consider my efforts successful. I am always open to talking to any person, group or organization about what I do with VMware products. Please reach out to me if you ever want to have a discussion.\nEmail: Dale.Hassinger@vCrocs.info\nLocation: Dillsburg, PA\n\u0026ldquo;9 - 5 pays the bills, 5 - 10 advances your career\u0026rdquo; ","date":"February 22, 2022","image":"https://dalehassinger.github.io/geeky-hugo/images/post/vexpert-2022-01_huea633dfc62497ad674470427f21ef8c9_70292_650x0_resize_box_3.png","permalink":"/geeky-hugo/blog/vexpert-2022/","title":"vExpert 2022"},{"categories":["SaltStack Config"],"contents":"Part 8: Pouring the salt grains\nMy previous posts about grain data were to show how to add minion grain data during the creation of a new server with vRA using PowerShell. This post I want to show how I\u0026rsquo;m going to maintain the grain data that is not default out of the box grain data.\n Windows Server grain data not available out of the of box that I want to add to every minion AND make sure the grain data stays up to date:\n Windows Server Features | Roles Windows Server Installed Software Windows Server Running Services   These are the steps that I use to maintain custom grain data with a Windows Server:\n Create a PowerShell Script that can run locally on a minion. Add the script to the SaltStack Config File Manager. Use salt-call to run salt.functions locally on a minion. See screen shot and my code examples below. Create a SaltStack Config Job to execute the PowerShell Script remotely on the minion. See Screen Shot. Create a SaltStack Config Schedule to run the job that you create. The job can run every day, once a week, every 4 hours. Whatever makes sense for your use case. See Screen Shot.   If you want to run a script locally on a minion and use salt functions that is where you use the salt-call command. After you learn the salt-functions and are logged into a Windows Server locally, you can still use salt commands by using salt-call.\n# --- example code salt-call --version salt-call test.ping # --- Show Disk Usage salt-call disk.usage # --- Show Installed Features|Roles salt-call win_servermanager.list_installed # --- Show Installed Sofwtare salt-call pkg.list_pkgs Link to salt-call Documentation\n Step 1 - Add script to SaltStack Config File Manager:\nSee code examples below to add Windows Server Features|Roles, Installed Software, and Runnings Services as grain data.\nClick Here to see Larger Image of Screen Shot\nStep 2 - Create SaltStack Config Job:\nClick Here to see Larger Image of Screen Shot\nStep 3 - Create SaltStack Config Schedule:\nClick Here to see Larger Image of Screen Shot\n Code Examples: - Add Windows Features | Roles as grain data: \u0026lt;# .SYNOPSIS This Script is used to Get Windows Servers Features and add as Grain Data .DESCRIPTION Windows Servers Features .PARAMETER No Parameters .INPUTS No inputs .OUTPUTS salt grain data .NOTES Version: 1.00 Author: Dale Hassinger Creation Date: 04/20/2022 Purpose/Change: Initial script development Revisions: .EXAMPLE N/A #\u0026gt; # ----- [ Start of Code ] --------------------------------------------------------------------------- # --- Minion Get Windows Server Features Installed # --- Delete existing grains features data $saltCommand = 'salt-call grains.delkey sem_Windows_Feature force=True' #$saltCommand # --- Run Salt Command Invoke-Expression -Command $saltCommand $saltCommand = 'salt-call win_servermanager.list_installed --output=json' #$saltCommand # --- Run Salt Command $results =Invoke-Expression -Command $saltCommand #$results $features = $results | ConvertFrom-Json #$features $features = $features.local #$features $features = $features -split(\u0026quot;:\u0026quot;) $features = $features -split(\u0026quot;;\u0026quot;) $features = $features -replace(\u0026quot;@{\u0026quot;,\u0026quot;\u0026quot;) $features = $features -replace(\u0026quot;}\u0026quot;,\u0026quot;\u0026quot;) $features = $features.trim() $features = $features -replace(\u0026quot;=\u0026quot;,\u0026quot; | \u0026quot;) $features = $features | Sort-Object #$features foreach($feature in $features){ # --- Grains Append $saltCommand = 'salt-call grains.append sem_Windows_Feature \u0026quot;' + $feature + '\u0026quot;' #$saltCommand # --- Run Salt Command Invoke-Expression -Command $saltCommand } # End Foreach # --- Delete existing grains last update data $saltCommand = 'salt-call grains.delkey sem_last_grains_update force=True' #$saltCommand # --- Run Salt Command Invoke-Expression -Command $saltCommand # --- Add a Date that grains last updated $grainsupdateDate = Get-Date $grainsupdateDate = $grainsupdateDate.ToString(\u0026quot;MM/dd/yyyy | hh:mm\u0026quot;) #$grainsupdateDate # --- Grains Append $saltCommand = 'salt-call grains.append sem_last_grains_update \u0026quot;' + $grainsupdateDate + '\u0026quot;' # --- Run Salt Command Invoke-Expression -Command $saltCommand # --- Grains Sync $saltCommand = 'salt-call saltutil.sync_grains' # --- Run Salt Command Invoke-Expression -Command $saltCommand # ----- [ End of Code ] ---------------------------------------------------------------------------  - Add Windows Server Installed Packages|Software as grain data: \u0026lt;# .SYNOPSIS This Script is used to Get Windows Installed Packages and add as Grain Data .DESCRIPTION Windows Servers Installed Packages .PARAMETER No Parameters .INPUTS No inputs .OUTPUTS salt grain data .NOTES Version: 1.00 Author: Dale Hassinger Creation Date: 04/20/2022 Purpose/Change: Initial script development Revisions: .EXAMPLE N/A #\u0026gt; # ----- [ Start of Code ] --------------------------------------------------------------------------- # --- Minion Get Windows Server Installed Packages|Software # --- Delete existing grains features data $saltCommand = 'salt-call grains.delkey sem_Windows_Installed_Software force=True' #$saltCommand # --- Run Salt Command Invoke-Expression -Command $saltCommand $saltCommand = 'salt-call pkg.list_pkgs --output=json' #$saltCommand # --- Run Salt Command $results =Invoke-Expression -Command $saltCommand #$results $installedPackages = $results | ConvertFrom-Json $installedPackages = $installedPackages.local $installedPackages = $installedPackages -split(\u0026quot;:\u0026quot;) $installedPackages = $installedPackages -split(\u0026quot;;\u0026quot;) $installedPackages = $installedPackages -replace(\u0026quot;@{\u0026quot;,\u0026quot;\u0026quot;) $installedPackages = $installedPackages -replace(\u0026quot;}\u0026quot;,\u0026quot;\u0026quot;) $installedPackages = $installedPackages.trim() $installedPackages = $installedPackages -replace(\u0026quot;=\u0026quot;,\u0026quot; | \u0026quot;) $installedPackages = $installedPackages | Sort-Object #$installedPackages foreach($installedPackage in $installedPackages){ # --- Grains Append $saltCommand = 'salt-call grains.append sem_Windows_Installed_Software \u0026quot;' + $installedPackage + '\u0026quot;' #$saltCommand # --- Run Salt Command Invoke-Expression -Command $saltCommand } # End Foreach # --- Delete existing grains last update data $saltCommand = 'salt-call grains.delkey sem_last_grains_update force=True' #$saltCommand # --- Run Salt Command Invoke-Expression -Command $saltCommand # --- Add a Date that grains last updated $grainsupdateDate = Get-Date $grainsupdateDate = $grainsupdateDate.ToString(\u0026quot;MM/dd/yyyy | hh:mm\u0026quot;) #$grainsupdateDate # --- Grains Append $saltCommand = 'salt-call grains.append sem_last_grains_update \u0026quot;' + $grainsupdateDate + '\u0026quot;' # --- Run Salt Command Invoke-Expression -Command $saltCommand # --- Grains Sync $saltCommand = 'salt-call saltutil.sync_grains' # --- Run Salt Command Invoke-Expression -Command $saltCommand # ----- [ End of Code ] ---------------------------------------------------------------------------  - Add Windows Running Services as grain data: \u0026lt;# .SYNOPSIS This Script is used to Get Windows Servers Running Services and add as Grain Data .DESCRIPTION Windows Servers Running Services .PARAMETER No Parameters .INPUTS No inputs .OUTPUTS salt grain data .NOTES Version: 1.00 Author: Dale Hassinger Creation Date: 04/20/2022 Purpose/Change: Initial script development Revisions: .EXAMPLE N/A #\u0026gt; # ----- [ Start of Code ] --------------------------------------------------------------------------- # --- Minion Get Windows Server Running Services # --- Delete existing grains running services data $saltCommand = 'salt-call grains.delkey sem_Windows_Services_Running force=True' #$saltCommand # --- Run Salt Command Invoke-Expression -Command $saltCommand # --- Get all Running Services $serviceNames = Get-Service | Where-Object {$_.Status -eq 'Running'} # --- Create Array $servicesGrains = @() # --- Add Service data to the array foreach($serviceName in $serviceNames){ $grainString = $serviceName.Name + ' | ' + $serviceName.DisplayName $servicesGrains = $servicesGrains + $grainString } # End Foreach #$servicesGrains # --- Add Windows Running Services as Grain Data foreach($servicesGrain in $servicesGrains){ # --- Grains Append $saltCommand = 'salt-call grains.append sem_Windows_Services_Running \u0026quot;' + $servicesGrain + '\u0026quot;' #$saltCommand # --- Run Salt Command Invoke-Expression -Command $saltCommand } # End Foreach # --- Delete existing grains last update data $saltCommand = 'salt-call grains.delkey sem_last_grains_update force=True' #$saltCommand # --- Run Salt Command Invoke-Expression -Command $saltCommand # --- Add a Date that grains last updated $grainsupdateDate = Get-Date $grainsupdateDate = $grainsupdateDate.ToString(\u0026quot;MM/dd/yyyy | hh:mm\u0026quot;) #$grainsupdateDate # --- Grains Append $saltCommand = 'salt-call grains.append sem_last_grains_update \u0026quot;' + $grainsupdateDate + '\u0026quot;' # --- Run Salt Command Invoke-Expression -Command $saltCommand # --- Grains Sync $saltCommand = 'salt-call saltutil.sync_grains' # --- Run Salt Command Invoke-Expression -Command $saltCommand # ----- [ End of Code ] ---------------------------------------------------------------------------  SaltStack Config Target using Windows Server Running Service (SQL Server):\nClick Here to see Larger Image of Screen Shot\n Lessons Learned:\n Windows Server Features|Roles make a great way to target minions. Windows Server installed software also makes a great way to target minions. Windows Server Running Services is a good way to target minions. If you add custom grain data when the server is created you also need a way to maintain the grain data so it stays up to date and is current.   Salt Links I found to be very helpful:\n SaltStack Cheat Sheet SaltStack Tutorials SaltStack Documentation SaltStack Community Slack Channel learnvrealizeautomation.github.io   When I write about vRealize Automation (\u0026ldquo;vRA\u0026rdquo;) I always say there are many ways to accomplish the same task. SaltStack Config is the same way. I am showing what I felt was important to see but every organization/environment will be different. There is no right or wrong way to use Salt. This is a GREAT Tool that is included with your vRealize Suite Advanced/Enterprise license. If you own the vRealize Suite, you own SaltStack Config.\n","date":"February 12, 2022","image":"https://dalehassinger.github.io/geeky-hugo/images/post/salt_huea633dfc62497ad674470427f21ef8c9_166891_650x0_resize_box_3.png","permalink":"/geeky-hugo/blog/saltstack-config-part-08/","title":"VMware vRealize SaltStack Config as a Windows Server Admin - Part 8"},{"categories":null,"contents":"Links to some of my favorite Bloggers and Content: Bloggers:  Brock Peterson - vRealize Master LucD - PowerShell Master William Lam - VMware Master Yellow Bricks  VMware:  VMware Operations Management Book - Great Book! code.VMware.com - Samples/Resources learnvrealizeautomation.github.io blogs.VMware.com PowerShell PowerCLI VMware PowerCLI Cmdlets by Product vRealize Automation vRealize Operations vRealize Log Insight ports.VMware.com - Good Link when you live in a Zero trust environment  Podcasts:  IT Reality Podcast The Hacks - Powered By SaltStack Virtually Speaking Podcast  ","date":"January 1, 2020","image":"https://dalehassinger.github.io/geeky-hugo/images/post/salt_huea633dfc62497ad674470427f21ef8c9_166891_650x0_resize_box_3.png","permalink":"/geeky-hugo/blog/links/","title":"Favorite Links"},{"categories":null,"contents":" My current focus is Enterprise Automation, Monitoring and Logging. I am using VMware vRealize Automation and SaltStack Config to complete server builds, software installs, schedule VM snap shots, Microsoft 365 automation, Citrix Management, Automate Data Center Flips, Server Decommissions, and many other Day 2 processes… For monitoring I use vRealize Operations for the “Single Pane of Glass” experience. I also use vRealize Log Insight for logging and LCM (Life Cycle Manager) for installing all the vRealize Products.\nAlmost all the code I write to complete the Automation that I create is done with PowerShell. The reason I choose to use PowerShell is because to do Automation with VMware products they have released their product PowerCLI, which is built on top of PowerShell. There hasn’t been anything that I wanted to Automate that I haven’t been able to do with PowerShell. To do remote Citrix management also works very well using PowerShell.\nI have also started to do Automation with Azure. I am using PowerShell to create VMs and SaltStack Config to complete the configuration management, install software and maintain state.\n I have learned a lot from the vCommunity, Powershell and PowerCLI web sites. I want to use this blog as a way for me to give back. If one person finds anything I post helpful, I will consider my efforts successful.\nThe code that I have shared I use with vRealize Automation Cloud Templates/Catalog Items and everyday VMware Admin functions. Everyday I learn something new. If I think it should be shared I will write a blog about it. Check back often to see what I am doing next.\n ","date":"January 1, 1","image":"https://dalehassinger.github.io/geeky-hugo/images/author_hu6305ea221e0c0ffe310e27cad1b2fcb7_4089227_650x0_resize_box_3.png","permalink":"/geeky-hugo/about/","title":"About Dale Hassinger"},{"categories":null,"contents":"","date":"January 1, 1","image":"https://dalehassinger.github.io/geeky-hugo/images/author_hu6305ea221e0c0ffe310e27cad1b2fcb7_4089227_650x0_resize_box_3.png","permalink":"/geeky-hugo/contact/","title":"Contact Page"},{"categories":null,"contents":"Privacy Policy Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi amet, ultrices scelerisue cras. Tincidunt hendrerit egestas venenatis risus sit nunc. Est esglit non in ipsum lect;aaus adipiscing et enim porttitor. Dui ultrices et volud eetpat nunc, turpis rutrum elit vestibululm ipsum. Arcu fringilla duis vitae mos dsdllis duicras interdum purus cursus massa metus. Acc umsan felaais, egsdvet nisi, viverra turpis fermentum sit suspf bafedfb ndisse fermentum consectetur. Facilisis feugiat trisique orci tempor sed masd fbsssa tristique ultrices sodales. Augue est sapien elementum facilisis. Enim tincidnt cras interdum purus ndisse. morbi quis nunc.\nMore Privacy Policy Et dolor placerat tempus risus nunc urna, nunc a. Mattis viverra ut sapidaaen enim sed tortor. Mattis gravida fusce cras interdum purus cursus massa metus. Acc umsan felaais, eget nisi, viverra turpis fermentum sit suspf bafedfb ndisse. morbi quis nunc, at arcu quam facilisi. In in lacus aliquam dictum sagittis morbi odio. Et magnis cursus sem sed condimentum. Nibh non potenti ac amsdfet Tincidunt hendrerit egestas venenatis risus sit nunc. Est esglit non in ipsuasdm lect;aaus adipiscing et enim porttitor. Dui ultrices et volud eetpat nunc, turpis ndisse. morbi quis nunc, at arcu quam facilisi ndisse. morbi quis nunc, at arcu quam facilisi\nEt dolor placerat tempus risus nunc urna, nunc a. Mattis viverra ut sapidaaen enim sed tortor. Mattis gravida fusce cras interdum purus cursus massa metus. Acc umsan felaais, eget nisi, viverra turpis fermentum sit suspf bafedfb ndisse. morbi quis nunc, at arcu quam facilisi. In in lacus aliquam dictum sagittis morbi odio. Et magnis cursus sem sed condimentum. Nibh non potenti ac amsdfet Tincidunt hendrerit egestas venenatis risus sit nunc. Est esglit non in ipsuasdm lect;aaus adipiscing et enim porttitor. Dui ultrices et volud eetpat nunc, turpis ndisse. morbi quis nunc, at arcu quam facilisi ndisse. morbi quis nunc, at arcu quam facilisi\n","date":"January 1, 1","image":"https://dalehassinger.github.io/geeky-hugo/images/author_hu6305ea221e0c0ffe310e27cad1b2fcb7_4089227_650x0_resize_box_3.png","permalink":"/geeky-hugo/privacy-policy/","title":"Privacy Policy"},{"categories":null,"contents":"","date":"January 1, 1","image":"https://dalehassinger.github.io/geeky-hugo/images/author_hu6305ea221e0c0ffe310e27cad1b2fcb7_4089227_650x0_resize_box_3.png","permalink":"/geeky-hugo/search/","title":"Search Result"}]